(()=>{"use strict";const e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__save_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};class t{constructor(e,t){this._config=e,this._form=t,this._inputsList=Array.from(t.querySelectorAll(e.inputSelector)),this._submitButtonElement=t.querySelector(e.submitButtonSelector)}_showError(e,t){e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage}_hideError(e,t){e.classList.remove(this._config.inputErrorClass),t.textContent=""}_disableButton(){this._submitButtonElement.disabled=!0,this._submitButtonElement.classList.add(this._config.inactiveButtonClass)}_enableButton(){this._submitButtonElement.disabled=!1,this._submitButtonElement.classList.remove(this._config.inactiveButtonClass)}_toggleButtonState(e){e?this._enableButton():this._disableButton()}_setEventListener(){0!==this._inputsList.length&&(this._disableButton(),this._inputsList.forEach((e=>{e.addEventListener("input",(()=>{const t=this._inputsList.every((e=>e.checkValidity()));this._toggleButtonState(t),this._checkInputValidity(e)}))})))}enableValidation(){this._setEventListener(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._enableButton()}))}_checkInputValidity(e){const t=e.validity.valid,n=this._form.querySelector(`#${e.id}-error`);t?this._hideError(e,n):this._showError(e,n)}resetValidationState(){this._inputsList.forEach((e=>{const t=this._form.querySelector(`#${e.id}-error`);this._hideError(e,t)})),this._disableButton()}}class n{constructor(e,t,n,r){this._name=e,this._link=t,this._handleCardClick=r,this._selectorTemplate=n,this._templateElement=this._getTemplateElement(),this._cardElement=this._createCard()}_createCard(){const e=this._getTemplateElement().cloneNode(!0),t=e.querySelector(".element__text");return this._imgElement=e.querySelector(".element__img"),this._buttonDelElement=e.querySelector(".element__trash"),this._cardLike=e.querySelector(".element__vector"),t.textContent=this._name,this._imgElement.src=this._link,this._imgElement.alt=this._name,this._addCardEvents(),e}_getTemplateElement(){return document.querySelector(this._selectorTemplate).content.querySelector(".element")}_removeCard(){this._cardElement.remove()}_likeCard(e){this._cardLike.classList.toggle("element__vector_active")}_addCardEvents(){this._buttonDelElement.addEventListener("click",this._removeCard.bind(this)),this._imgElement.addEventListener("click",(()=>this._handleCardClick(this._link,this._name))),this._cardLike.addEventListener("click",this._likeCard.bind(this))}returnCard(){return this._cardElement}}const r=document.querySelector(".popup_edit-profile"),i=document.querySelector(".popup_add-photo"),o=document.querySelector(".popup-image"),s=document.querySelectorAll(".popup__exit"),l=document.querySelector(".popup__form_edit-profile"),a=document.querySelector(".popup__form_add-photo"),c=document.querySelector("#username"),u=document.querySelector("#job"),d=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__section-title"),_=document.querySelector(".profile__section-subtitle"),m=document.querySelector(".profile__add-button"),h=document.querySelector(".cardsPlace"),v=o.querySelector(".popup-image__pic"),y=o.querySelector(".popup-image__title"),E=document.querySelector("#name"),f=document.querySelector("#link"),k=new t(e,l);k.enableValidation();const S=new t(e,a);function b(e){e.classList.add("popup_opened"),document.addEventListener("keydown",L)}function g(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",L)}function L(e){"Escape"===e.key&&g(document.querySelector(".popup_opened"))}function C(e){h.prepend(e)}function q(e,t){e===r&&(c.value=p.textContent,u.value=_.textContent),t.resetValidationState(),b(e),e===i&&a.reset()}function B(e,t){v.src=e,v.alt=t,y.textContent=t,b(o)}function x(e,t,r){return new n(e,t,r,B)}S.enableValidation(),l.addEventListener("submit",(function(e){e.preventDefault(),p.textContent=c.value,_.textContent=u.value,g(r)})),a.addEventListener("submit",(function(e){e.preventDefault(),C(x(E.value,f.value,"#card-template").returnCard()),g(i)})),d.addEventListener("click",(()=>q(r,k))),m.addEventListener("click",(()=>q(i,S))),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].reverse().forEach((function(e){C(x(e.name,e.link,"#card-template").returnCard())})),s.forEach((e=>{e.addEventListener("click",(function(){g(e.closest(".popup"))}))})),document.querySelectorAll(".popup").forEach((e=>{e.addEventListener("click",(e=>{e.target.classList.contains("popup")&&g(e.target)}))})),console.log("Hello, World!")})();